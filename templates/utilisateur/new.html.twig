{% extends 'base.html.twig' %}

{% block title %}New Utilisateur{% endblock %}

{% block body %}
    <div class="container">
        <h1>Nouvel utilisateur</h1>
        <div class="row">
            <div class="col-md-6">
                {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
                <div class="form-group">
                    {{ form_label(form.nom, 'Nom') }}
                    {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.nom) }}
                </div>
                <div class="form-group">
                    {{ form_label(form.cin, 'CIN') }}
                    {{ form_widget(form.cin, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.cin) }}
                </div>
                <div class="form-group">
                    {{ form_label(form.email, 'Email') }}
                    {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.email) }}
                </div>
                <div class="form-group">
                    {{ form_label(form.tel, 'Téléphone') }}
                    {{ form_widget(form.tel, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.tel) }}
                </div>
            
                <div class="form-group">
                    {{ form_label(form.adresse, 'Adresse') }}
                    {{ form_widget(form.adresse, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.adresse) }}
                </div>
                <div class="form-check">
                    {{ form_widget(form.isVerified, {'attr': {'class': 'form-check-input'}}) }}
                    {{ form_label(form.isVerified, 'isVerified', {'label_attr': {'class': 'form-check-label'}}) }}
                    {{ form_errors(form.isVerified) }}
                </div>

                </div>
            <div class="col-md-6">
                <div class="form-group">
                    {{ form_label(form.rate, 'Rate') }}
                    {{ form_widget(form.rate, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.rate) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.pwd, 'Mot de passe') }}
                    {{ form_widget(form.pwd, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.pwd) }}
                </div>
                <div class="form-group">
                    {{ form_label(form.posteAg, 'Poste Ag') }}
                    {{ form_widget(form.posteAg, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.posteAg) }}
                </div>
                <div class="form-group">
                    {{ form_label(form.idMuni, 'ID municipalité') }}
                    {{ form_widget(form.idMuni, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.idMuni) }}
                </div>
                <div class="form-group">
    {{ form_label(form.role, 'Rôle') }}
    {% set roleWidget = form_widget(form.role, {
        'attr': {'class': 'form-control'},
        'choice_label': 'Choisir un rôle',
        'choices': {
            'ROLE_ADMIN': 'Admin',
            'ROLE_CITOYEN': 'Citoyen',
            'ROLE_AGENT': 'Agent municipal'
        }
    }) %}
    {% set roleLabel = form_label(form.role, 'Rôle') %}
    {% set roleErrors = form_errors(form.role) %}
    {% set dropdown = '<select id="role" name="role" class="form-control">
        <option value="">Choisir un rôle</option>
        <option value="ROLE_ADMIN">Admin</option>
        <option value="ROLE_CITOYEN">Citoyen</option>
        <option value="ROLE_AGENT">Agent municipal</option>
    </select>' %}
    {{ roleLabel|replace({ '</label>': '</label>' ~ dropdown })|raw }}
    {{ roleErrors }}
</div>

                </div>
                <button type="submit" class="btn btn-primary">Enregistrer</button>
                {{ form_end(form) }}
                
                <a href="{{ path('app_utilisateur_index') }}" class="btn btn-secondary">Retour à la liste</a>
            
        </div>
    </div>
{% endblock %}


